# coding=utf8

import datetime
from datetime_util import DatetimeUtil
from proto.policy_pb2 import Policy


cash_taken_in = 30000
max_train_watch_days = 0
max_predict_watch_days = 0
max_hold_days = 30
max_watch_jump_times = 10
DEFAULT_TIMEOUT_SECONDS = 2.0
EXPIRE_AFTER_MS = 10000
EXPIRE_AFTER_DAYS = 100
POSITION_PERCENT_LIST = range(0, 100+1, 10)
end_date_str = DatetimeUtil.to_datetime_str(datetime.datetime.now())


# best policy fix for improve train speed

# buy_days_watch:15	2-5-8-9:	1.19510914734 # 14.192, 1.02821984262 # 8.4, 0.895496480751 # 2.92, 0.764960191049 # 1.811
# buy_days_watch:10	2-5-8-9:	1.20854553604 # 17.122, 1.02189637158 # 10.4, 0.8855222122 # 3.8, 0.722699301807 # 1.93
# buy_days_watch:20	2-5-8-9:	1.16628610024 # 12.32, 1.02160154956 # 7.2, 0.904542472462 # 2.42, 0.769281673976 # 1.189
# buy_days_watch:5	2-5-8-9:	1.2031678982 # 23.874, 1.02081145021 # 13.75, 0.848808013158 # 5.36, 0.665902869118 # 2.426
BUY_WATCH_DAYS_LIST = [15]
# sell_days_watch:15	2-5-8-9:	1.23013866919 # 14.912, 1.04704621872 # 8.44, 0.891200242997 # 3.0, 0.733736507942 # 1.741
# sell_days_watch:20	2-5-8-9:	1.22479592739 # 13.204, 1.04063553463 # 7.5, 0.897240429646 # 2.468, 0.730709881747 # 1.219
# sell_days_watch:10	2-5-8-9:	1.17930207727 # 17.044, 1.02475195877 # 9.8, 0.877468725376 # 3.92, 0.684441354771 # 1.93
# sell_days_watch:5	2-5-8-9:	1.11310061124 # 23.4, 0.99330735526 # 13.82, 0.860888243394 # 4.88, 0.682299132134 # 2.24
SELL_WATCH_DAYS_LIST = [15]


# buy_percent_n:20	2-5-8-10:	1.20428389305 # 12.808, 1.04677392881 # 7.9, 0.921295918214 # 3.12, 0.785876241192 # 2.0
# buy_percent_n:30	2-5-8-10:	1.20617618691 # 14.0, 1.04500483541 # 8.725, 0.901410365332 # 3.72, 0.757108894934 # 2.0
BUY_PRICE_PERCENT_LIST = range(20, 20 + 1, 10)

# sell_percent_n:110	2-5-8-9:	1.26625731137 # 11.2, 1.13306259364 # 7.2, 1.04533893279 # 3.0, 1.02193602462 # 2.0
# sell_percent_n:100	2-5-8-9:	1.26625731137 # 11.2, 1.13306259364 # 7.2, 1.04533893279 # 3.0, 1.02193602462 # 2.0
# sell_percent_n:80	2-5-8-9:	1.26102344763 # 14.0, 1.12368146811 # 8.8, 1.04223373156 # 3.8, 1.01569045808 # 2.0
# sell_percent_n:90	2-5-8-9:	1.26542120237 # 12.2, 1.12301105862 # 8.0, 1.04192526162 # 3.72, 1.01968853688 # 2.0
# sell_percent_n:70	2-5-8-9:	1.23610520233 # 14.76, 1.12165929586 # 9.4, 1.04262850752 # 4.08, 1.01869211194 # 2.48
# sell_percent_n:60	2-5-8-9:	1.21051657253 # 15.44, 1.1026040635 # 9.9, 1.03802631457 # 4.08, 1.01353593443 # 2.8
# sell_percent_n:50	2-5-8-9:	1.20158110578 # 16.18, 1.08226989692 # 10.3, 1.02682962936 # 4.08, 1.00627234815 # 2.8

SELL_PRICE_PERCENT_LIST = range(90, 90 + 1, 10)

# buy_mode:1; 2 - 5 - 8 - 10:    1.20042430959  # 14.92, 1.04264026959 # 9.25, 0.905355531836 # 3.892, 0.0261296704281 # 0.0
# buy_mode:3; 2 - 5 - 8 - 10:    1.20547857769  # 20.434, 1.02425980384 # 12.16, 0.8800411176 # 5.0, 0.0215538388489 # 0.0
BUY_MODE_LIST = [Policy.TradePolicy.Percent.LOW]

# sell_mode:2; 2 - 5 - 8 - 10:    1.21805349502  # 14.84, 1.04524164974 # 9.225, 0.896557619738 # 3.88, 0.0215538388489 # 0.0
# sell_mode:3; 2 - 5 - 8 - 10:    1.16409161087  # 20.48, 1.02165842369 # 12.46, 0.883413927914 # 5.028, 0.0221897851161 # 0.0
SELL_MODE_LIST = [Policy.TradePolicy.Percent.HIGH]

# 亏损时采用当天最低价结算
# loss_thousandth:990	2-5-8-9:	1.19076378091 # 13.0, 1.05403091586 # 8.3, 0.92836392508 # 3.6, 0.786737482675 # 2.0
# loss_thousandth:90	2-5-8-9:	1.12389635797 # 17.24, 0.988076539468 # 11.0, 0.709886877256 # 4.6, 0.450250413156 # 2.66
# loss_thousandth:70	2-5-8-9:	1.10098349753 # 19.08, 0.954325797968 # 12.0, 0.673595279022 # 4.7, 0.387051076421 # 2.9
# loss_thousandth:50	2-5-8-9:	1.06228667569 # 23.0, 0.906782936813 # 13.9, 0.592815592142 # 5.7, 0.323292285201 # 3.0
# loss_thousandth:30	2-5-8-9:	1.00786199591 # 28.78, 0.83316303845 # 17.5, 0.520302331885 # 6.86, 0.241835300511 # 4.0
# loss_thousandth:10	2-5-8-9:	0.916745495217 # 38.12, 0.726997007631 # 24.3, 0.415436638131 # 9.66, 0.206007871194 # 5.12
# 亏损时采用乐观亏损限价结算
# loss_thousandth:990	2-5-8-9:	1.19076378091 # 13.0, 1.05403091586 # 8.3, 0.92836392508 # 3.6, 0.786737482675 # 2.0
# loss_thousandth:90	2-5-8-9:	1.15440990512 # 15.84, 1.01682631063 # 10.0, 0.832401623145 # 3.76, 0.66510656362 # 2.0
# loss_thousandth:70	2-5-8-9:	1.13579086111 # 16.4, 1.00624951176 # 10.2, 0.824617164323 # 3.8, 0.665041861354 # 2.0
# loss_thousandth:10	2-5-8-9:	1.11206508416 # 21.68, 1.00312269245 # 12.5, 0.89701258595 # 5.0, 0.773352594126 # 2.83
# loss_thousandth:50	2-5-8-9:	1.12048712551 # 18.34, 1.002961264 # 11.0, 0.818331702732 # 4.4, 0.675737629067 # 2.0
# loss_thousandth:30	2-5-8-9:	1.1068305836 # 21.0, 0.994854041732 # 12.0, 0.84103462556 # 4.7, 0.670549122535 # 2.8

# loss_stop_thousandth:900	2-5-8-9:	1.34036059876 # 8.904, 1.09842756675 # 3.0, 0.937667478263 # 0.9, 0.724961949606 # 0.0
# loss_stop_thousandth:500	2-5-8-9:	1.34036059876 # 9.0, 1.09842756675 # 3.3, 0.935952731851 # 1.0, 0.687904312898 # 0.0
# loss_stop_thousandth:90	2-5-8-9:	1.2160927858 # 15.696, 1.03172633938 # 6.97, 0.822711139387 # 2.0, 0.658555177763 # 0.81
# loss_stop_thousandth:50	2-5-8-9:	1.16396648997 # 18.4, 1.00514265302 # 8.5, 0.807983797907 # 2.824, 0.621501427166 # 0.956

# LOSS_STOP_THOUSANDTH_LIST = range(10, 90+1, 10) + [990]
LOSS_STOP_THOUSANDTH_LIST = [50] + [990]

# sell_percent_n:80	2-5-8-9:	1.19076378091 # 13.0, 1.05403091586 # 8.3, 0.92836392508 # 3.6, 0.786737482675 # 2.0
# sell_profit_thousandth_n:1000	2-5-8-9:	1.5010364146 # 0.0, 1.12682739029 # 0.0, 0.927094149429 # 0.0, 0.712499716577 # 0.0
# sell_profit_thousandth_n:200	2-5-8-9:	1.0604950619 # 21.6, 1.00374652301 # 11.45, 0.917648813809 # 4.96, 0.715426493074 # 2.73
# sell_profit_thousandth_n:25	2-5-8-9:	1.0604950619 # 21.6, 1.00374652301 # 11.45, 0.917648813809 # 4.96, 0.715426493074 # 2.73
# sell_profit_thousandth_n:45	2-5-8-9:	1.0604950619 # 21.6, 1.00374652301 # 11.45, 0.917648813809 # 4.96, 0.715426493074 # 2.73
# sell_profit_thousandth_n:5	2-5-8-9:	1.0604950619 # 21.6, 1.00374652301 # 11.45, 0.917648813809 # 4.96, 0.715426493074 # 2.73
# sell_profit_thousandth_n:65	2-5-8-9:	1.0604950619 # 21.6, 1.00374652301 # 11.45, 0.917648813809 # 4.96, 0.715426493074 # 2.73
# sell_profit_thousandth_n:85	2-5-8-9:	1.0604950619 # 21.6, 1.00374652301 # 11.45, 0.917648813809 # 4.96, 0.715426493074 # 2.73


# sell_profit_thousandth_n:200	2-5-8-9:	1.43970918457 # 5.944, 1.09809752083 # 1.45, 0.866355942069 # 0.0, 0.649154260983 # 0.0
# sell_profit_thousandth_n:100	2-5-8-9:	1.36827897795 # 9.056, 1.08808726417 # 3.0, 0.875540391053 # 1.0, 0.682285898655 # 0.0
# sell_profit_thousandth_n:70	2-5-8-9:	1.30185530975 # 10.404, 1.06867575741 # 4.0, 0.873792009823 # 1.0, 0.688332386247 # 0.0
# sell_profit_thousandth_n:60	2-5-8-9:	1.28096832897 # 10.96, 1.06480182194 # 4.305, 0.864789814787 # 1.174, 0.693480990739 # 0.0
# sell_profit_thousandth_n:40	2-5-8-9:	1.22986507757 # 12.852, 1.06000973145 # 5.6, 0.84370835014 # 1.96, 0.672369486568 # 0.781
# sell_profit_thousandth_n:30	2-5-8-9:	1.20590738361 # 14.22, 1.05856928215 # 6.295, 0.818411912739 # 2.0, 0.645315849475 # 0.93
# sell_profit_thousandth_n:50	2-5-8-9:	1.25618761386 # 11.924, 1.05825366075 # 4.9, 0.856458764735 # 1.42, 0.672574552404 # 0.0
# sell_profit_thousandth_n:20	2-5-8-9:	1.16060005121 # 16.52, 1.03285856657 # 7.65, 0.809441743325 # 2.498, 0.633022650948 # 1.0
# sell_profit_thousandth_n:10	2-5-8-9:	1.11877784526 # 20.526, 1.00805316199 # 10.05, 0.800152829283 # 3.0, 0.628971664919 # 1.951

# SELL_PROFIT_THOUSANDTH_LIST = range(10, 100+1, 10) + [200, 1000]
# SELL_PROFIT_THOUSANDTH_LIST = [10, 20, 30, 40, 50, 60, 70] + [200, 100]
SELL_PROFIT_THOUSANDTH_LIST = [50]


BUY_TREND_GROW_PERCENT_LIST = []
SELL_TREND_GROW_RECENT_LIST = []



fin_stock = open('stock_list.easy')
select_stock_name_list = fin_stock.read().split('\n')
fin_stock.close()



# select_stock_name_list = ["BABA", "JD", "WB", "AMZN", "BIDU", "MSFT", "FB", "GOOGL", "NTES", "TSLA", "MOMO",  "NVDA", "AAPL",
#                           "SPY", "QQQ", "IWM", "IWV"]
# start_date_str = "20150101"
start_date_str = "20160101"


select_stock_name_list = ["BABA"]
# start_date_str = "20170101"

